# 패턴 매칭에 의한 검색
- `LIKE` 술어를 사용하면 문자열의 일부분을 비교하는 '부분 검색'을 할 수 있다.

```
열명 LIKE '패턴'
```

- `LIKE` 술어를 사용하면 열 값이 부분적으로 일치하는 경우에도 참이 된다.
- 왼쪽에는 매칭 대상을 지정하고, 오른쪽에는 패턴을 문자열로 지정한다.
  - 오른쪽에는 수치형 상수를 지정할 수 없다.
- 패턴을 정의할 때는 `%`, `_`와 같은 메타문자를 사용할 수 있다.
  - `%`: 임의의 문자열
  - `_`: 임의의 문자 하나
- 패턴을 정의할 때는 메타문자를 여러 개 사용할 수 있다.
- 메타문자는 '와일드카드'로도 불린다.
- 메타문자를 사용하지 않으면 문제는 없지만, 완전 일치로 검색되므로 `LIKE`를 사용하는 의미가 없어진다.
- 예제 sample25 테이블

| no | text |
|:--:|-------------------------------------------------|
| 1 | SQL은 RDBMS를 조작하는 언어이다. |
| 2 | LIKE에서는 메타문자 %와 _를 사용할 수 있다. |
| 3 | LIKE는 SQL에서 사용할 수 있는 술어 중 하나이다. |

- 전방 일치: 문자열 앞쪽에 지정한 문자와 일치하는 것으로, 지정한 문자 뒤로 임의의 문자열이 존재한다.

```
SELECT * FROM sample25 WHERE text LIKE 'SQL%';
```

| no | text |
|:--:|-------------------------------------------------|
| 1 | SQL은 RDBMS를 조작하는 언어이다. |

- 중간 일치: 지정한 문자 앞, 뒤로 임의의 문자열이 존재한다.

```
SELECT * FROM sample25 WHERE text LIKE '%SQL%';
```

| no | text |
|:--:|-------------------------------------------------|
| 1 | SQL은 RDBMS를 조작하는 언어이다. |
| 3 | LIKE는 SQL에서 사용할 수 있는 술어 중 하나이다. |

- 후방 일치: 지정한 문자 앞에 임의의 문자열이 존재한다.
- 메타 문자 `%`는 **빈 문자열에도 매치한다.**

### LIKE로 %를 검색하기
- sample25 테이블을 보면 메타문자와 같은 `%`와 `_`가 포함되어 있는 경우가 있으며, 이를 검색해야 할 때가 있다.
- 메타문자를 검색할 때는 `\`와 같은 '이스케이프' 방법을 사용한다.

```
SELECT * FROM sample25 WHERE text LIKE '%\%%';
```

| no | text |
|:--:|-------------------------------------------------|
| 2 | LIKE에서는 메타문자 %와 _를 사용할 수 있다. |

### 문자열 상수 '의 이스케이프
- 문자열 상수는 `'문자열'`와 같이 처리한다.
- 만약 `It's`를 문자열 상수로 표현하려면 중간에 `'`가 포함되어, 컴퓨터는 시작과 끝을 구분할 수 없어 에러가 발생한다.
- SQL에서는 문자열 상수 `'`가 있는 경우 다음과 같이 처리한다.
  - `It's` => `'It''s'` : '를 연속해서 두 번 사용한다.
  - `'` => `''''` : `'`를 문자열 상수로 표현하려면 '를 연속으로 4개 사용해야 한다.

---
- 간단한 패텅 매칭은 `LIKE`로 충분하지만, 복잡해지면 정규 표현식을 사용하는 것이 좋다.
- 최근 대부분의 데이터베이스는 정규 표현식을 지원한다.
